!function(){let e={email:document.querySelector("#email").value,token:"",password:"",password_repeat:""};function t(e,t){const n=document.querySelector(".alertas");if(null==document.querySelector(".alerta")){const a=document.createElement("P");a.classList.add("alerta"),a.classList.add(e),a.textContent=t,n.appendChild(a),setTimeout((()=>{a.remove()}),2e3)}}function n(){const t=document.querySelectorAll(".token");e.token="",t.forEach((e=>{e.value=""}))}document.addEventListener("DOMContentLoaded",(function(){!function(){const a=document.querySelectorAll(".token");document.querySelector(".botones").firstElementChild.addEventListener("click",(a=>{a.preventDefault(),async function(){const a=`${window.location}/api/validar`,o=new FormData;o.append("email",e.email),o.append("token",e.token);const r=await fetch(a,{method:"POST",body:o});(await r.json()).resultado?function(){const a=document.querySelector(".registro"),o=document.createElement("DIV");o.classList.add("ventana");const r=document.createElement("DIV");r.classList.add("modal");const l=document.createElement("DIV");l.classList.add("iconcerrar"),l.innerHTML='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>';const i=document.createElement("H3");i.textContent="Reestablecer Contraseña";const s=document.createElement("DIV");s.classList.add("alertas");const d=document.createElement("FORM");d.classList.add("formulario");const c=document.createElement("INPUT");c.setAttribute("type","password"),c.setAttribute("placeholder","Tu Nueva Contraseña"),c.setAttribute("id","password");const u=document.createElement("INPUT");u.setAttribute("type","password"),u.setAttribute("placeholder","Repite Tu Contraseña"),u.setAttribute("id","password_repeat");const p=document.createElement("INPUT");p.setAttribute("type","submit"),p.classList.add("btn"),p.classList.add("verde"),r.appendChild(l),r.appendChild(i),r.appendChild(s),d.appendChild(c),d.appendChild(u),d.appendChild(p),r.appendChild(d),o.appendChild(r),a.appendChild(o),p.addEventListener("click",(a=>{a.preventDefault(),function(a,o){""==a.value||a.value.length<6?t("error","Agregue una contraseña Valida"):a.value!==o.value?t("error","Deben Coincidir las contraseñas"):(e.password=a.value,e.password_repeat=o.value,async function(){const a=`${window.location}/api/reestablecer`,o=new FormData;o.append("password",e.password),o.append("email",e.email);const r=await fetch(a,{method:"POST",body:o}),l=await r.json();if(l.resultado){let e;n(),document.querySelector(".ventana").remove(),Swal.fire({icon:"success",title:"Contraseña Cambiada con Exito",html:"",timer:3e3,timerProgressBar:!0,didOpen:()=>{Swal.showLoading();const t=Swal.getPopup().querySelector("b");e=setInterval((()=>{t.textContent=`${Swal.getTimerLeft()}`}),100)},willClose:()=>{clearInterval(e)}}).then((()=>{window.location.href=window.location.origin})),setTimeout((()=>{window.location.href=window.location.origin}),3e3)}else null==l.resultado?t("error","La Contraseña debe ser distinta a la anterior"):(n(),document.querySelector(".ventana").remove())}())}(c,u)})),l.addEventListener("click",(e=>{n(),o.remove()})),o.addEventListener("click",(e=>{e.target==o&&(n(),o.remove())}))}():Swal.fire({icon:"error",title:"Error",text:"Token No Valido"}).then((e=>{n()}))}()})),a.forEach((t=>{t.addEventListener("input",(n=>{n.target.value.length>1?t.value=n.target.value.slice(0,1):1===n.target.value.length?(t.nextElementSibling.focus(),e.token+=n.target.value):0===n.target.value.length&&t.previousElementSibling&&t.previousElementSibling.focus()}))}))}()}))}();