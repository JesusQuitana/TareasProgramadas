!function(){let e=[];function t(){const n=document.querySelector("#tareas");document.querySelectorAll(".tarea").forEach((e=>{e.remove()})),e.forEach((o=>{const r=document.createElement("DIV");r.classList.add("tarea");const d=document.createElement("P");d.textContent=o.tarea;const i=document.createElement("DIV");i.classList.add("acciones");const c=document.createElement("P");c.classList.add("estado"),0==o.estado?(c.classList.add("pendiente"),c.textContent="Pendiente"):1==o.estado&&(c.classList.add("completa"),c.textContent="Completada"),c.addEventListener("click",(n=>{!async function(n){const o=`${window.location.origin}/proyecto/api/editar/tarea`,{id:r,tarea:d,estado:i}=n,c=new FormData;c.append("id",r),c.append("tarea",d),c.append("estado",i);const l=await fetch(o,{method:"POST",body:c});await l.json()?(e.map((e=>{e.id===r&&(e.estado=0===e.estado?1:0)})),t()):a("error","Hubo un error al eliminar la tarea")}(o)}));const l=document.createElement("P");l.textContent="Eliminar",l.classList.add("eliminar"),l.addEventListener("click",(n=>{!async function(n){const o=`${window.location.origin}/proyecto/api/eliminar/tarea`,{id:r,tarea:d,estado:i}=n,c=new FormData;c.append("id",r),c.append("tarea",d),c.append("estado",i);const l=await fetch(o,{method:"POST",body:c});await l.json()?(e=e.filter((e=>e.id!==r)),t()):a("error","Hubo un error al eliminar la tarea")}(o)})),r.appendChild(d),i.appendChild(c),i.appendChild(l),r.appendChild(i),n.appendChild(r)}))}function a(e,t){const a=document.querySelector(".alertas");if(null==document.querySelector(".alerta")){const n=document.createElement("P");n.classList.add("alerta"),n.classList.add(e),n.textContent=t,a.appendChild(n),setTimeout((()=>{n.remove()}),2e3)}}document.addEventListener("DOMContentLoaded",(function(){(async function(){url=`${window.location.origin}/proyecto/api/tareas`,datos=new FormData,datos.append("url",document.querySelector("#url").value),datos.append("email",document.querySelector("#email").value);const a=await fetch(url,{method:"POST",body:datos}),n=await a.json();n.resultado?(e=n.registro,t()):0==n.resultado&&null!==n.registro?Swal.fire({icon:"error",title:"Error",text:"Error al consultar Tareas"}).then((e=>{window.location.reload()})):Swal.fire({icon:"info",title:"Tarea",text:"Agregue una nueva tarea para empezar"})})(),document.querySelector("#newTarea").addEventListener("click",(n=>{!function(){const n=document.querySelector(".uptask"),o=document.createElement("DIV");o.classList.add("ventana");const r=document.createElement("DIV");r.classList.add("modal");const d=document.createElement("DIV");d.classList.add("iconcerrar"),d.innerHTML='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>';const i=document.createElement("H3");i.textContent="Nueva Tarea";const c=document.createElement("DIV");c.classList.add("alertas");const l=document.createElement("FORM");l.classList.add("formulario");const s=document.createElement("INPUT");s.setAttribute("type","text"),s.setAttribute("placeholder","Nombre de la Tarea"),s.setAttribute("id","nombre"),s.setAttribute("name","nombre");const u=document.createElement("INPUT");u.setAttribute("type","submit"),u.classList.add("btn"),u.classList.add("verde"),r.appendChild(d),r.appendChild(i),r.appendChild(c),l.appendChild(s),l.appendChild(u),r.appendChild(l),o.appendChild(r),n.appendChild(o),u.addEventListener("click",(n=>{n.preventDefault(),""==s.value?a("error","Agregue un Nombre"):async function(n){const o=`${window.location.origin}/proyecto/api/new/tarea`,r=new FormData;r.append("tarea",n),r.append("url",document.querySelector("#url").value);const d=await fetch(o,{method:"POST",body:r}),i=await d.json();i.resultado?(document.querySelector(".ventana").remove(),e=[...e,{id:i.registro,tarea:n,estado:0}],t(),Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,didOpen:e=>{e.onmouseenter=Swal.stopTimer,e.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",title:"Tarea Agregada Correctamente"}),setTimeout((()=>{window.location.reload()}),3e3)):a("error","Hubo un error al registrar la tarea")}(s.value)})),d.addEventListener("click",(e=>{o.remove()})),o.addEventListener("click",(e=>{e.target==o&&o.remove()}))}()})),document.querySelector("#eliminarProyecto").addEventListener("click",(async e=>{const t=`${window.location.origin}/proyecto/api/eliminar`,n=new FormData;n.append("url",document.querySelector("#url").value);const o=await fetch(t,{method:"POST",body:n});await o.json()?window.location.href=`${window.location.origin}/dashboard`:a("error","Hubo un error al eliminar la tarea")}))}))}();